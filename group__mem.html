<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ssm: Memory management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ssm
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">Runtime Library for the Sparse Synchronous Model</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__mem.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memory management</div>  </div>
</div><!--header-->
<div class="contents">

<p>Values are always word-sized, and may point to heap-allocated, reference-counted <em>objects</em>; heap memory is allocated from a set of size-indexed memory pools.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Discussion</h2>
<p>Values are always word-sized, and may point to heap-allocated, reference-counted <em>objects</em>; heap memory is allocated from a set of size-indexed memory pools. </p>
<p>For simplicity and flexibility, all values in SSM runtime are word-sized, represented using <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. When the size of a value exceeds what can be represented by a word, the value is a pointer to a heap-allocated <em>object</em>. In particular, they point to a memory management metadata header, <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a>.</p>
<p>The SSM runtime uses reference counting to manage the lifetime of heap objects. The reference count is also maintained in the <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> header. When a reference is duplicated, use <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> to increment its reference count. When a reference is dropped, use <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> decrement its reference and free if necessary. These macros first check whether the given <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> is heap-allocated before attempting to dereference the heap pointer; to skip this check (for example, if a value is known to be a heap object at compile time), use <a class="el" href="group__mem.html#gab5dad0cd40fb4260de450e2226d26a8f" title="Duplicate a heap reference, incrementing its ref count.">ssm_dup_unsafe()</a> and <a class="el" href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e" title="Drop a reference to a heap item, and free it if necessary.">ssm_drop_unsafe()</a>. When the reference count of an object reaches zero, it is cleaned up and freed using <a class="el" href="group__mem.html#gac773e49a0378b73d49552e242a1a7971" title="Finalize and free a heap object.">ssm_drop_final()</a>, which drop any references held by the soon-to-be-freed object.</p>
<p>The <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> header's <em>kind</em> field indicates what <a class="el" href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250" title="The different kinds of heap objects, enumerated.">ssm_kind</a> the object is. This determines its memory layout in the heap, in particular where the object might hold references (pointers) to other heap objects. The interpretation and layout of the 16-bit <em>info</em> field depends on the <em>kind</em>, coming in three different "flavors": <em>vector</em>, <em>variant</em>, and <em>size</em>. All this information is used by <a class="el" href="group__mem.html#gac773e49a0378b73d49552e242a1a7971" title="Finalize and free a heap object.">ssm_drop_final()</a> to figure out the number and location of values to <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a>, as well as the size of the object to deallocate.</p>
<p>Heap objects are allocated for each <a class="el" href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250" title="The different kinds of heap objects, enumerated.">ssm_kind</a> using functions with prefix <em>ssm_new_</em>, such as <a class="el" href="group__adt.html#ga5126bbb129deaf5b0fac198760fc38be">ssm_new_adt()</a> or <a class="el" href="group__time.html#gad3a108e2859a0959fcf5dffcc8f86671">ssm_new_time()</a>.</p>
<p>The SSM runtime comes with its own platform-agnostic allocator, parameterized by handlers set using <a class="el" href="group__mem.html#gafe56b79f41cfe1522669c35cbc423231" title="Initializes the underlying allocator system.">ssm_mem_init()</a>. It allocates small pieces of memory in <em>blocks</em>, within designated <em>memory pools</em>. Each memory pool consists of zero or more fixed-size <em>memory pages</em>, and are requested from the platform/OS on-demand via the <a class="el" href="ssm-mem_8c.html#a40385bc630b530cbe8cadeff2008421a" title="Page allocation handler, set by ssm_mem_init().">alloc_page()</a> handler. Meanwhile, allocations for larger ranges of memory are deferred to the <a class="el" href="ssm-mem_8c.html#afe84928b968b035c36a85decd645d13f" title="Large memory allocation handler, set by ssm_mem_init().">alloc_mem()</a> and <a class="el" href="ssm-mem_8c.html#ac9e094b32b7178847b7c17a01070f5ea" title="Large memory release handler, set by ssm_mem_init().">free_mem()</a> handlers.</p>
<p>The allocator's memory pools may be configured using the <a class="el" href="group__mem.html#ga5514bce5af584559d51b5f75344205ef" title="Block size of the smallest memory pool.">SSM_MEM_POOL_MIN</a>, <a class="el" href="group__mem.html#ga1ef7f3f854e79719bd5bb8e8f3694a23" title="Factor between each successive memory pool size, in base 2.">SSM_MEM_POOL_FACTOR_BASE2</a>, <a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790" title="Number of memory pools.">SSM_MEM_POOL_COUNT</a>, and <a class="el" href="group__mem.html#gab5a6226f024f81622a5ce90dcd9b7388" title="The size of a memory page; must be greater than SSM_MEM_POOL_MAX.">SSM_MEM_PAGE_SIZE</a> preprocessor constants. The default values produce 4 memory pools, of sizes 16B, 64B, 256B, and 1024B, and a memory page size of 4096B.</p>
<p>The runtime recognizes several compile time configuration macros that help with profiling and debugging. They are:</p>
<ul>
<li>CONFIG_MEM_TRACE: log information any time something is allocated or freed.</li>
<li>CONFIG_MEM_STATS: collect statistics and report about memory pool usage.</li>
<li>CONFIG_MALLOC_HEAP: bypass the allocator entirely and allocate everything using malloc(), so that memory accesses can be tracked with Valgrind. </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structssm__mem__statistics__pool.html">ssm_mem_statistics_pool</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics for a heap page pool; used in <a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5" title="Statistics for the heap; filled with ssm_mem_statistics_collect().">ssm_mem_statistics_t</a>.  <a href="structssm__mem__statistics__pool.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structssm__mem__statistics.html">ssm_mem_statistics</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics for the heap; filled with <a class="el" href="group__mem.html#gae2ba32721536023e424c4b2679b65390" title="Collect and return statistics about the heap.">ssm_mem_statistics_collect()</a>.  <a href="structssm__mem__statistics.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionssm__value__t.html">ssm_value_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">SSM values are either "packed" values or heap-allocated.  <a href="unionssm__value__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structssm__mm.html">ssm_mm</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The memory management metadata "header" for heap-allocated objects.  <a href="structssm__mm.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga5514bce5af584559d51b5f75344205ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga5514bce5af584559d51b5f75344205ef">SSM_MEM_POOL_MIN</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:ga5514bce5af584559d51b5f75344205ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block size of the smallest memory pool.  <a href="group__mem.html#ga5514bce5af584559d51b5f75344205ef">More...</a><br /></td></tr>
<tr class="separator:ga5514bce5af584559d51b5f75344205ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ef7f3f854e79719bd5bb8e8f3694a23"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga1ef7f3f854e79719bd5bb8e8f3694a23">SSM_MEM_POOL_FACTOR_BASE2</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga1ef7f3f854e79719bd5bb8e8f3694a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factor between each successive memory pool size, in base 2.  <a href="group__mem.html#ga1ef7f3f854e79719bd5bb8e8f3694a23">More...</a><br /></td></tr>
<tr class="separator:ga1ef7f3f854e79719bd5bb8e8f3694a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8404b692c7f1ab6beaf2ebb5614e4790"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">SSM_MEM_POOL_COUNT</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga8404b692c7f1ab6beaf2ebb5614e4790"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of memory pools.  <a href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">More...</a><br /></td></tr>
<tr class="separator:ga8404b692c7f1ab6beaf2ebb5614e4790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fe24b7e82f37df88331c2acef65ed2c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">SSM_MEM_POOL_SIZE</a>(pool)&#160;&#160;&#160;(<a class="el" href="group__mem.html#ga5514bce5af584559d51b5f75344205ef">SSM_MEM_POOL_MIN</a> &lt;&lt; (<a class="el" href="group__mem.html#ga1ef7f3f854e79719bd5bb8e8f3694a23">SSM_MEM_POOL_FACTOR_BASE2</a> * pool))</td></tr>
<tr class="memdesc:ga9fe24b7e82f37df88331c2acef65ed2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the size of a memory pool.  <a href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">More...</a><br /></td></tr>
<tr class="separator:ga9fe24b7e82f37df88331c2acef65ed2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd44b83b7d4fb58e0fccd2380a540a52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gafd44b83b7d4fb58e0fccd2380a540a52">SSM_MEM_POOL_MAX</a>&#160;&#160;&#160;<a class="el" href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">SSM_MEM_POOL_SIZE</a>(<a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">SSM_MEM_POOL_COUNT</a> - 1)</td></tr>
<tr class="memdesc:gafd44b83b7d4fb58e0fccd2380a540a52"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the largest memory pool.  <a href="group__mem.html#gafd44b83b7d4fb58e0fccd2380a540a52">More...</a><br /></td></tr>
<tr class="separator:gafd44b83b7d4fb58e0fccd2380a540a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5a6226f024f81622a5ce90dcd9b7388"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gab5a6226f024f81622a5ce90dcd9b7388">SSM_MEM_PAGE_SIZE</a>&#160;&#160;&#160;<a class="el" href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">SSM_MEM_POOL_SIZE</a>(<a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">SSM_MEM_POOL_COUNT</a>)</td></tr>
<tr class="memdesc:gab5a6226f024f81622a5ce90dcd9b7388"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of a memory page; must be greater than <a class="el" href="group__mem.html#gafd44b83b7d4fb58e0fccd2380a540a52" title="The size of the largest memory pool.">SSM_MEM_POOL_MAX</a>.  <a href="group__mem.html#gab5a6226f024f81622a5ce90dcd9b7388">More...</a><br /></td></tr>
<tr class="separator:gab5a6226f024f81622a5ce90dcd9b7388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8036e301aaee6fbac00bd2cdaa0dea8c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga8036e301aaee6fbac00bd2cdaa0dea8c">ssm_marshal</a>(v)&#160;&#160;&#160;(<a class="el" href="unionssm__value__t.html">ssm_value_t</a>) { .packed_val = ((v) &lt;&lt; 1 | 1) }</td></tr>
<tr class="memdesc:ga8036e301aaee6fbac00bd2cdaa0dea8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> from a 31-bit integral value.  <a href="group__mem.html#ga8036e301aaee6fbac00bd2cdaa0dea8c">More...</a><br /></td></tr>
<tr class="separator:ga8036e301aaee6fbac00bd2cdaa0dea8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga68caa3f774f25fa58037cdd157fb9f7d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga68caa3f774f25fa58037cdd157fb9f7d">ssm_unmarshal</a>(v)&#160;&#160;&#160;((v).packed_val &gt;&gt; 1)</td></tr>
<tr class="memdesc:ga68caa3f774f25fa58037cdd157fb9f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract an integral value from a packed <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>.  <a href="group__mem.html#ga68caa3f774f25fa58037cdd157fb9f7d">More...</a><br /></td></tr>
<tr class="separator:ga68caa3f774f25fa58037cdd157fb9f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4385ed8c6c55bb272f6048a721d533e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v)&#160;&#160;&#160;(((v).packed_val &amp; 0x1) == 0)</td></tr>
<tr class="memdesc:gab4385ed8c6c55bb272f6048a721d533e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a value is on the heap (i.e., is an object).  <a href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">More...</a><br /></td></tr>
<tr class="separator:gab4385ed8c6c55bb272f6048a721d533e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac91722f7d8b8a233392cd4f9c8b83821"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gac91722f7d8b8a233392cd4f9c8b83821">ssm_is_shared</a>(v)&#160;&#160;&#160;!(<a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v) &amp;&amp; ((v).heap_ptr-&gt;ref_count == 1))</td></tr>
<tr class="memdesc:gac91722f7d8b8a233392cd4f9c8b83821"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a value is shared, i.e., unsafe to modify.  <a href="group__mem.html#gac91722f7d8b8a233392cd4f9c8b83821">More...</a><br /></td></tr>
<tr class="separator:gac91722f7d8b8a233392cd4f9c8b83821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f7765026c74350e37df334c9e59bb12"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12">ssm_dup</a>(v)&#160;&#160;&#160;(<a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v) ? <a class="el" href="group__mem.html#gab5dad0cd40fb4260de450e2226d26a8f">ssm_dup_unsafe</a>(v) : (v))</td></tr>
<tr class="memdesc:ga9f7765026c74350e37df334c9e59bb12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a possible heap reference, incrementing its ref count.  <a href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12">More...</a><br /></td></tr>
<tr class="separator:ga9f7765026c74350e37df334c9e59bb12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabaf350ad4a1577dee5e31e6efd851054"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054">ssm_drop</a>(v)</td></tr>
<tr class="memdesc:gabaf350ad4a1577dee5e31e6efd851054"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop a reference to a possible heap item, and free it if necessary.  <a href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054">More...</a><br /></td></tr>
<tr class="separator:gabaf350ad4a1577dee5e31e6efd851054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5dad0cd40fb4260de450e2226d26a8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gab5dad0cd40fb4260de450e2226d26a8f">ssm_dup_unsafe</a>(v)&#160;&#160;&#160;((++(v).heap_ptr-&gt;ref_count, (v)))</td></tr>
<tr class="memdesc:gab5dad0cd40fb4260de450e2226d26a8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a heap reference, incrementing its ref count.  <a href="group__mem.html#gab5dad0cd40fb4260de450e2226d26a8f">More...</a><br /></td></tr>
<tr class="separator:gab5dad0cd40fb4260de450e2226d26a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51acf919e4a7bd5b795aa8f302d8605e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e">ssm_drop_unsafe</a>(v)</td></tr>
<tr class="memdesc:ga51acf919e4a7bd5b795aa8f302d8605e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop a reference to a heap item, and free it if necessary.  <a href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e">More...</a><br /></td></tr>
<tr class="separator:ga51acf919e4a7bd5b795aa8f302d8605e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac7ae9a342c295d6d62852b3924b768b1"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structssm__mem__statistics__pool.html">ssm_mem_statistics_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gac7ae9a342c295d6d62852b3924b768b1">ssm_mem_statistics_pool_t</a></td></tr>
<tr class="memdesc:gac7ae9a342c295d6d62852b3924b768b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics for a heap page pool; used in <a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5" title="Statistics for the heap; filled with ssm_mem_statistics_collect().">ssm_mem_statistics_t</a>.  <a href="group__mem.html#gac7ae9a342c295d6d62852b3924b768b1">More...</a><br /></td></tr>
<tr class="separator:gac7ae9a342c295d6d62852b3924b768b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11df8a853242068faf5de7c8258c96d5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structssm__mem__statistics.html">ssm_mem_statistics</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5">ssm_mem_statistics_t</a></td></tr>
<tr class="memdesc:ga11df8a853242068faf5de7c8258c96d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics for the heap; filled with <a class="el" href="group__mem.html#gae2ba32721536023e424c4b2679b65390" title="Collect and return statistics about the heap.">ssm_mem_statistics_collect()</a>.  <a href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5">More...</a><br /></td></tr>
<tr class="separator:ga11df8a853242068faf5de7c8258c96d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e1f76a5ae1699bf2358c3e2e2224c24"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga1e1f76a5ae1699bf2358c3e2e2224c24">ssm_word_t</a></td></tr>
<tr class="memdesc:ga1e1f76a5ae1699bf2358c3e2e2224c24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Values are 32-bits, the largest supported machine word size.  <a href="group__mem.html#ga1e1f76a5ae1699bf2358c3e2e2224c24">More...</a><br /></td></tr>
<tr class="separator:ga1e1f76a5ae1699bf2358c3e2e2224c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga0f26e675a76a28f76a4d31787be19250"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250">ssm_kind</a> { <br />
&#160;&#160;<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250a384acc0f162ac52d0dfa65dd02f20edc">SSM_TIME_K</a> = 0, 
<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250aa01b94ecfba291193b6e9e96bd5189d6">SSM_ADT_K</a>, 
<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250a6766cac5e3a9d55b0615a0706dfc8a85">SSM_SV_K</a>, 
<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250a173db97b4cb3fc306482e4a2b4ab623e">SSM_CLOSURE_K</a>, 
<br />
&#160;&#160;<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250a12b995a7b0ca72d54a6231921ad9bfc4">SSM_ARRAY_K</a>, 
<a class="el" href="group__mem.html#gga0f26e675a76a28f76a4d31787be19250a054dc1c4d12d4bb548370b57fd716a51">SSM_BLOB_K</a>
<br />
 }</td></tr>
<tr class="memdesc:ga0f26e675a76a28f76a4d31787be19250"><td class="mdescLeft">&#160;</td><td class="mdescRight">The different kinds of heap objects, enumerated.  <a href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250">More...</a><br /></td></tr>
<tr class="separator:ga0f26e675a76a28f76a4d31787be19250"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafe56b79f41cfe1522669c35cbc423231"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gafe56b79f41cfe1522669c35cbc423231">ssm_mem_init</a> (void *(*alloc_page_handler)(void), void *(*alloc_mem_handler)(size_t), void(*free_mem_handler)(void *, size_t))</td></tr>
<tr class="memdesc:gafe56b79f41cfe1522669c35cbc423231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the underlying allocator system.  <a href="group__mem.html#gafe56b79f41cfe1522669c35cbc423231">More...</a><br /></td></tr>
<tr class="separator:gafe56b79f41cfe1522669c35cbc423231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga478b2d53579f050c74c7374e75dd8bcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga478b2d53579f050c74c7374e75dd8bcb">ssm_mem_destroy</a> (void(*free_page_handler)(void *))</td></tr>
<tr class="memdesc:ga478b2d53579f050c74c7374e75dd8bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tears down the underlying allocator system.  <a href="group__mem.html#ga478b2d53579f050c74c7374e75dd8bcb">More...</a><br /></td></tr>
<tr class="separator:ga478b2d53579f050c74c7374e75dd8bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2ba32721536023e424c4b2679b65390"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gae2ba32721536023e424c4b2679b65390">ssm_mem_statistics_collect</a> (<a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5">ssm_mem_statistics_t</a> *stats)</td></tr>
<tr class="memdesc:gae2ba32721536023e424c4b2679b65390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect and return statistics about the heap.  <a href="group__mem.html#gae2ba32721536023e424c4b2679b65390">More...</a><br /></td></tr>
<tr class="separator:gae2ba32721536023e424c4b2679b65390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac773e49a0378b73d49552e242a1a7971"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gac773e49a0378b73d49552e242a1a7971">ssm_drop_final</a> (<a class="el" href="unionssm__value__t.html">ssm_value_t</a> v)</td></tr>
<tr class="memdesc:gac773e49a0378b73d49552e242a1a7971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize and free a heap object.  <a href="group__mem.html#gac773e49a0378b73d49552e242a1a7971">More...</a><br /></td></tr>
<tr class="separator:gac773e49a0378b73d49552e242a1a7971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd1921cbc85e9e0e6e3d0ea931e89f66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gafd1921cbc85e9e0e6e3d0ea931e89f66">ssm_dups</a> (size_t cnt, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *arr)</td></tr>
<tr class="memdesc:gafd1921cbc85e9e0e6e3d0ea931e89f66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> on an array of values.  <a href="group__mem.html#gafd1921cbc85e9e0e6e3d0ea931e89f66">More...</a><br /></td></tr>
<tr class="separator:gafd1921cbc85e9e0e6e3d0ea931e89f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b1681c79051b78cd5f54cb80a0c81f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga8b1681c79051b78cd5f54cb80a0c81f4">ssm_drops</a> (size_t cnt, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *arr)</td></tr>
<tr class="memdesc:ga8b1681c79051b78cd5f54cb80a0c81f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> on an array of values.  <a href="group__mem.html#ga8b1681c79051b78cd5f54cb80a0c81f4">More...</a><br /></td></tr>
<tr class="separator:ga8b1681c79051b78cd5f54cb80a0c81f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb146ccc4d7843565c93a22084f6ab1f"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f">ssm_mem_alloc</a> (size_t size)</td></tr>
<tr class="memdesc:gaeb146ccc4d7843565c93a22084f6ab1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a contiguous range of memory.  <a href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f">More...</a><br /></td></tr>
<tr class="separator:gaeb146ccc4d7843565c93a22084f6ab1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1accac4139fc44c56acab9ece5db7f73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga1accac4139fc44c56acab9ece5db7f73">ssm_mem_prealloc</a> (size_t size, size_t num_pages)</td></tr>
<tr class="memdesc:ga1accac4139fc44c56acab9ece5db7f73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preallocate memory pages to ensure capacity in memory pools.  <a href="group__mem.html#ga1accac4139fc44c56acab9ece5db7f73">More...</a><br /></td></tr>
<tr class="separator:ga1accac4139fc44c56acab9ece5db7f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3087c5edfa451e28309ea0cb234ad02e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mem.html#ga3087c5edfa451e28309ea0cb234ad02e">ssm_mem_free</a> (void *m, size_t size)</td></tr>
<tr class="memdesc:ga3087c5edfa451e28309ea0cb234ad02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate memory allocated by <a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f" title="Allocate a contiguous range of memory.">ssm_mem_alloc()</a>.  <a href="group__mem.html#ga3087c5edfa451e28309ea0cb234ad02e">More...</a><br /></td></tr>
<tr class="separator:ga3087c5edfa451e28309ea0cb234ad02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga5514bce5af584559d51b5f75344205ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5514bce5af584559d51b5f75344205ef">&#9670;&nbsp;</a></span>SSM_MEM_POOL_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_POOL_MIN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block size of the smallest memory pool. </p>
<p>Must be strictly greater than the word size, i.e., the size of <a class="el" href="group__mem.html#ga1e1f76a5ae1699bf2358c3e2e2224c24" title="Values are 32-bits, the largest supported machine word size.">ssm_word_t</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00185">185</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="ga1ef7f3f854e79719bd5bb8e8f3694a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ef7f3f854e79719bd5bb8e8f3694a23">&#9670;&nbsp;</a></span>SSM_MEM_POOL_FACTOR_BASE2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_POOL_FACTOR_BASE2&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factor between each successive memory pool size, in base 2. </p>
<p>Must be strictly greater than 0.</p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00199">199</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="ga8404b692c7f1ab6beaf2ebb5614e4790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8404b692c7f1ab6beaf2ebb5614e4790">&#9670;&nbsp;</a></span>SSM_MEM_POOL_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_POOL_COUNT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of memory pools. </p>
<p>Must be strictly greater than 0.</p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00213">213</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="ga9fe24b7e82f37df88331c2acef65ed2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9fe24b7e82f37df88331c2acef65ed2c">&#9670;&nbsp;</a></span>SSM_MEM_POOL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_POOL_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pool</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="group__mem.html#ga5514bce5af584559d51b5f75344205ef">SSM_MEM_POOL_MIN</a> &lt;&lt; (<a class="el" href="group__mem.html#ga1ef7f3f854e79719bd5bb8e8f3694a23">SSM_MEM_POOL_FACTOR_BASE2</a> * pool))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the size of a memory pool. </p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>the 0-index of the memory pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the memory pool at position <em>pool</em>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00227">227</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="gafd44b83b7d4fb58e0fccd2380a540a52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd44b83b7d4fb58e0fccd2380a540a52">&#9670;&nbsp;</a></span>SSM_MEM_POOL_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_POOL_MAX&#160;&#160;&#160;<a class="el" href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">SSM_MEM_POOL_SIZE</a>(<a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">SSM_MEM_POOL_COUNT</a> - 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of the largest memory pool. </p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00234">234</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="gab5a6226f024f81622a5ce90dcd9b7388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab5a6226f024f81622a5ce90dcd9b7388">&#9670;&nbsp;</a></span>SSM_MEM_PAGE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_MEM_PAGE_SIZE&#160;&#160;&#160;<a class="el" href="group__mem.html#ga9fe24b7e82f37df88331c2acef65ed2c">SSM_MEM_POOL_SIZE</a>(<a class="el" href="group__mem.html#ga8404b692c7f1ab6beaf2ebb5614e4790">SSM_MEM_POOL_COUNT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of a memory page; must be greater than <a class="el" href="group__mem.html#gafd44b83b7d4fb58e0fccd2380a540a52" title="The size of the largest memory pool.">SSM_MEM_POOL_MAX</a>. </p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-internal_8h_source.html#l00241">241</a> of file <a class="el" href="ssm-internal_8h_source.html">ssm-internal.h</a>.</p>

</div>
</div>
<a id="ga8036e301aaee6fbac00bd2cdaa0dea8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8036e301aaee6fbac00bd2cdaa0dea8c">&#9670;&nbsp;</a></span>ssm_marshal</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_marshal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="unionssm__value__t.html">ssm_value_t</a>) { .packed_val = ((v) &lt;&lt; 1 | 1) }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct an <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> from a 31-bit integral value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>the 31-bit integral value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a packed <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00292">292</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga68caa3f774f25fa58037cdd157fb9f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga68caa3f774f25fa58037cdd157fb9f7d">&#9670;&nbsp;</a></span>ssm_unmarshal</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_unmarshal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;((v).packed_val &gt;&gt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract an integral value from a packed <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>the packed <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the raw 31-bit integral value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00300">300</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gab4385ed8c6c55bb272f6048a721d533e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4385ed8c6c55bb272f6048a721d533e">&#9670;&nbsp;</a></span>ssm_on_heap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_on_heap</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(((v).packed_val &amp; 0x1) == 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether a value is on the heap (i.e., is an object). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>pointer to the <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-zero if on heap, zero otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00307">307</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gac91722f7d8b8a233392cd4f9c8b83821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac91722f7d8b8a233392cd4f9c8b83821">&#9670;&nbsp;</a></span>ssm_is_shared</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_is_shared</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;!(<a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v) &amp;&amp; ((v).heap_ptr-&gt;ref_count == 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether a value is shared, i.e., unsafe to modify. </p>
<p>The opposite of "shared" is "unique," as in C++'s "unique_ptr."</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>pointer to the <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-zero if shared, zero otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00316">316</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga9f7765026c74350e37df334c9e59bb12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f7765026c74350e37df334c9e59bb12">&#9670;&nbsp;</a></span>ssm_dup</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_dup</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v) ? <a class="el" href="group__mem.html#gab5dad0cd40fb4260de450e2226d26a8f">ssm_dup_unsafe</a>(v) : (v))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicate a possible heap reference, incrementing its ref count. </p>
<p>If the caller knows <em>v</em> is definitely on the heap, call <a class="el" href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e" title="Drop a reference to a heap item, and free it if necessary.">ssm_drop_unsafe()</a> to eliminate the heap check (and omit call if it is definitely not on the heap).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>pointer to the <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> header of the heap item. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00326">326</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gabaf350ad4a1577dee5e31e6efd851054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabaf350ad4a1577dee5e31e6efd851054">&#9670;&nbsp;</a></span>ssm_drop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_drop</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  do                                                                           \</div>
<div class="line">    if (<a class="code" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a>(v))                                                        \</div>
<div class="line">      ssm_drop_unsafe(v);                                                      \</div>
<div class="line">  while (0)</div>
</div><!-- fragment -->
<p>Drop a reference to a possible heap item, and free it if necessary. </p>
<p>If <em>v</em> is freed, all references held by the heap item itself will also be be dropped.</p>
<p>If the caller knows that <em>v</em> is definitely a heap item, call <a class="el" href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e" title="Drop a reference to a heap item, and free it if necessary.">ssm_drop_unsafe()</a> to eliminate the heap check (and omit call if it is definitely not on the heap).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td><a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> to be dropped. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00339">339</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gab5dad0cd40fb4260de450e2226d26a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab5dad0cd40fb4260de450e2226d26a8f">&#9670;&nbsp;</a></span>ssm_dup_unsafe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_dup_unsafe</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;((++(v).heap_ptr-&gt;ref_count, (v)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicate a heap reference, incrementing its ref count. </p>
<p>Called by <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>assumes that <em>v</em> is a heap pointer, i.e., <code><a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e" title="Whether a value is on the heap (i.e., is an object).">ssm_on_heap(v)</a></code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>pointer to the <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> header of the heap item. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00353">353</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga51acf919e4a7bd5b795aa8f302d8605e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51acf919e4a7bd5b795aa8f302d8605e">&#9670;&nbsp;</a></span>ssm_drop_unsafe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_drop_unsafe</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  do                                                                           \</div>
<div class="line">    if (--(v).heap_ptr-&gt;ref_count == 0)                                        \</div>
<div class="line">      ssm_drop_final(v);                                                       \</div>
<div class="line">  while (0)</div>
</div><!-- fragment -->
<p>Drop a reference to a heap item, and free it if necessary. </p>
<p>If <em>v</em> is freed, <a class="el" href="group__mem.html#gac773e49a0378b73d49552e242a1a7971" title="Finalize and free a heap object.">ssm_drop_final()</a> will be called to drop all heap objects <em>v</em> refers to.</p>
<p>Called by <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>assumes that <em>v</em> is a heap pointer, i.e., <code><a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e" title="Whether a value is on the heap (i.e., is an object).">ssm_on_heap(v)</a></code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td><a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> to be dropped. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00367">367</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gac7ae9a342c295d6d62852b3924b768b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7ae9a342c295d6d62852b3924b768b1">&#9670;&nbsp;</a></span>ssm_mem_statistics_pool_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structssm__mem__statistics__pool.html">ssm_mem_statistics_pool</a> <a class="el" href="group__mem.html#gac7ae9a342c295d6d62852b3924b768b1">ssm_mem_statistics_pool_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Statistics for a heap page pool; used in <a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5" title="Statistics for the heap; filled with ssm_mem_statistics_collect().">ssm_mem_statistics_t</a>. </p>
<dl class="section note"><dt>Note</dt><dd>Define CONFIG_MEM_STATS to enable this. </dd></dl>

</div>
</div>
<a id="ga11df8a853242068faf5de7c8258c96d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga11df8a853242068faf5de7c8258c96d5">&#9670;&nbsp;</a></span>ssm_mem_statistics_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structssm__mem__statistics.html">ssm_mem_statistics</a> <a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5">ssm_mem_statistics_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Statistics for the heap; filled with <a class="el" href="group__mem.html#gae2ba32721536023e424c4b2679b65390" title="Collect and return statistics about the heap.">ssm_mem_statistics_collect()</a>. </p>
<p>A collection of satistics collected by <a class="el" href="group__mem.html#gae2ba32721536023e424c4b2679b65390" title="Collect and return statistics about the heap.">ssm_mem_statistics_collect()</a> and designed to be printed by a function you supply.</p>
<dl class="section note"><dt>Note</dt><dd>Define CONFIG_MEM_STATS to enable this. </dd></dl>

</div>
</div>
<a id="ga1e1f76a5ae1699bf2358c3e2e2224c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e1f76a5ae1699bf2358c3e2e2224c24">&#9670;&nbsp;</a></span>ssm_word_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group__mem.html#ga1e1f76a5ae1699bf2358c3e2e2224c24">ssm_word_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Values are 32-bits, the largest supported machine word size. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00230">230</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga0f26e675a76a28f76a4d31787be19250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f26e675a76a28f76a4d31787be19250">&#9670;&nbsp;</a></span>ssm_kind</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250">ssm_kind</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The different kinds of heap objects, enumerated. </p>
<p>Types enumerated here that are not ADTs are chosen because they cannot be easily or efficiently expressed as a product of words. For instance, 64-bit timestamps cannot be directly stored in the payload of a regular heap object, where even-numbered timestamps may be misinterpreted as pointers. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250a384acc0f162ac52d0dfa65dd02f20edc"></a>SSM_TIME_K&#160;</td><td class="fielddoc"><p>64-bit timestamps, <a class="el" href="group__time.html#gae963c119a7847a3327202eacb31f66ca" title="Absolute time; never to overflow.">ssm_time_t</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250aa01b94ecfba291193b6e9e96bd5189d6"></a>SSM_ADT_K&#160;</td><td class="fielddoc"><p>ADT object, e.g., <a class="el" href="structssm__adt1.html" title="The struct template of a heap-allocated ADT object.">ssm_adt1</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250a6766cac5e3a9d55b0615a0706dfc8a85"></a>SSM_SV_K&#160;</td><td class="fielddoc"><p>Scheduled variables, <a class="el" href="group__sv.html#ga3ff20b6ba9aa056f1cf64051c20dd779" title="A scheduled variable that supports scheduled updates with triggers.">ssm_sv_t</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250a173db97b4cb3fc306482e4a2b4ab623e"></a>SSM_CLOSURE_K&#160;</td><td class="fielddoc"><p>Closure object, e.g., <a class="el" href="structssm__closure1.html" title="The struct template of a heap-allocated closure object.">ssm_closure1</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250a12b995a7b0ca72d54a6231921ad9bfc4"></a>SSM_ARRAY_K&#160;</td><td class="fielddoc"><p>Array of values, e.g., <a class="el" href="structssm__array1.html" title="The struct template of a heap-allocated array of values.">ssm_array1</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0f26e675a76a28f76a4d31787be19250a054dc1c4d12d4bb548370b57fd716a51"></a>SSM_BLOB_K&#160;</td><td class="fielddoc"><p>Blob of arbitrary data, e.g., <a class="el" href="structssm__blob1.html" title="The struct template of a heap-allocated blob.">ssm_blob1</a>. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00278">278</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafe56b79f41cfe1522669c35cbc423231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe56b79f41cfe1522669c35cbc423231">&#9670;&nbsp;</a></span>ssm_mem_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_mem_init </td>
          <td>(</td>
          <td class="paramtype">void *(*)(void)&#160;</td>
          <td class="paramname"><em>alloc_page_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(size_t)&#160;</td>
          <td class="paramname"><em>alloc_mem_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *, size_t)&#160;</td>
          <td class="paramname"><em>free_mem_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the underlying allocator system. </p>
<p>Memory pages are requested from the platform/OS on-demand via the provided <em>alloc_page_handler</em>. This handler must return a pointer to the beginning of a range of memory of size <a class="el" href="group__mem.html#gab5a6226f024f81622a5ce90dcd9b7388" title="The size of a memory page; must be greater than SSM_MEM_POOL_MAX.">SSM_MEM_PAGE_SIZE</a>, and the page <em>must</em> be zeroed out. These pages are assumed to never be freed.</p>
<p>To support arbitrarily large allocations, SSM's allocator uses <em>alloc_mem_handler</em> to allocate memory, and <em>free_mem_handler</em> to release it. There are no requirements on the contents of memory allocated with <em>alloc_mem_handler</em>. These handlers may also assume they will not be invoked to request memory ranges of less than <a class="el" href="group__mem.html#gafd44b83b7d4fb58e0fccd2380a540a52" title="The size of the largest memory pool.">SSM_MEM_POOL_MAX</a> bytes.</p>
<p>If the allocator is compiled with valgrind support (i.e., <em>USE_VALGRIND</em> is defined), it will perform a leak-check summary, to checkpoint how much memory has already been allocated.</p>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc_page_handler</td><td>allocates pages. </td></tr>
    <tr><td class="paramname">alloc_mem_handler</td><td>allocates arbitrarily large. </td></tr>
    <tr><td class="paramname">free_mem_handler</td><td>frees memory allocated with <em>alloc_mem_handler</em>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00136">136</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="ga478b2d53579f050c74c7374e75dd8bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga478b2d53579f050c74c7374e75dd8bcb">&#9670;&nbsp;</a></span>ssm_mem_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_mem_destroy </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>free_page_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tears down the underlying allocator system. </p>
<p>If the allocator is compiled with valgrind support (i.e., <em>USE_VALGRIND</em> is defined), it will perform a full leak-check summary, to report how much memory has been leaked since <a class="el" href="group__mem.html#gafe56b79f41cfe1522669c35cbc423231" title="Initializes the underlying allocator system.">ssm_mem_init()</a>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>this doesn't actually call <em>free_page_handler</em> yet. It still needs to be implemented, perhaps with the help of a superblock header to keep track of all pages allocated for each mempool</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Intended for platform code; should not be used in user code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">free_page_handler</td><td>frees pages allocated with <em>alloc_page_handler</em>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00156">156</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="gae2ba32721536023e424c4b2679b65390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2ba32721536023e424c4b2679b65390">&#9670;&nbsp;</a></span>ssm_mem_statistics_collect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_mem_statistics_collect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5">ssm_mem_statistics_t</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collect and return statistics about the heap. </p>
<dl class="section note"><dt>Note</dt><dd>Define CONFIG_MEM_STATS to enable this.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>non-NULL pointer to a <a class="el" href="group__mem.html#ga11df8a853242068faf5de7c8258c96d5" title="Statistics for the heap; filled with ssm_mem_statistics_collect().">ssm_mem_statistics_t</a> to be filled in </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00378">378</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="gac773e49a0378b73d49552e242a1a7971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac773e49a0378b73d49552e242a1a7971">&#9670;&nbsp;</a></span>ssm_drop_final()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_drop_final </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize and free a heap object. </p>
<p>Drops all heap objects <em>v</em> refers to, and perform any additional finalization as required by the <a class="el" href="group__mem.html#ga0f26e675a76a28f76a4d31787be19250" title="The different kinds of heap objects, enumerated.">ssm_kind</a> of <em>v</em>.</p>
<p>Called by <a class="el" href="group__mem.html#ga51acf919e4a7bd5b795aa8f302d8605e" title="Drop a reference to a heap item, and free it if necessary.">ssm_drop_unsafe()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>assumes that <em>v</em> is a heap pointer, i.e., <code><a class="el" href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e" title="Whether a value is on the heap (i.e., is an object).">ssm_on_heap(v)</a></code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td><a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> to be finalized and freed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00325">325</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="gafd1921cbc85e9e0e6e3d0ea931e89f66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd1921cbc85e9e0e6e3d0ea931e89f66">&#9670;&nbsp;</a></span>ssm_dups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_dups </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> on an array of values. </p>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00367">367</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="ga8b1681c79051b78cd5f54cb80a0c81f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b1681c79051b78cd5f54cb80a0c81f4">&#9670;&nbsp;</a></span>ssm_drops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_drops </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> *&#160;</td>
          <td class="paramname"><em>arr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> on an array of values. </p>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00372">372</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="gaeb146ccc4d7843565c93a22084f6ab1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb146ccc4d7843565c93a22084f6ab1f">&#9670;&nbsp;</a></span>ssm_mem_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ssm_mem_alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a contiguous range of memory. </p>
<p>Memory will be allocated from an appropriately sized memory pool, if one is available. Guaranteed to be aligned against the smallest power of 2 greater than <em>size</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>the requested memory range size, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the first byte of the allocate memory block. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00183">183</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="ga1accac4139fc44c56acab9ece5db7f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1accac4139fc44c56acab9ece5db7f73">&#9670;&nbsp;</a></span>ssm_mem_prealloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_mem_prealloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preallocate memory pages to ensure capacity in memory pools. </p>
<p>Does nothing if no memory pool will fit a block of <em>size</em>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>size whose memory pool should be preallocaed pages. </td></tr>
    <tr><td class="paramname">num_pages</td><td>number of pages to allocate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3087c5edfa451e28309ea0cb234ad02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3087c5edfa451e28309ea0cb234ad02e">&#9670;&nbsp;</a></span>ssm_mem_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_mem_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate memory allocated by <a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f" title="Allocate a contiguous range of memory.">ssm_mem_alloc()</a>. </p>
<p>The behavior of freeing memory not allocated by <a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f" title="Allocate a contiguous range of memory.">ssm_mem_alloc()</a> is undefined.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>pointer to the memory range allocated by <a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f" title="Allocate a contiguous range of memory.">ssm_mem_alloc()</a>. </td></tr>
    <tr><td class="paramname">size</td><td>the size of the memory range allocated by <a class="el" href="group__mem.html#gaeb146ccc4d7843565c93a22084f6ab1f" title="Allocate a contiguous range of memory.">ssm_mem_alloc()</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00233">233</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__mem_html_gab4385ed8c6c55bb272f6048a721d533e"><div class="ttname"><a href="group__mem.html#gab4385ed8c6c55bb272f6048a721d533e">ssm_on_heap</a></div><div class="ttdeci">#define ssm_on_heap(v)</div><div class="ttdoc">Whether a value is on the heap (i.e., is an object).</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00307">ssm.h:307</a></div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
<script type="text/javascript">
    // script for doxygen 1.9.1
    $(function() {
        $(document).ready(function(){
           toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
           toggleButton.title = "Toggle Light/Dark Mode"
           document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
       })
    })
</script>
</body>
</html>
