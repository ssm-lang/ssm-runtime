<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ssm: Closures</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ssm
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">Runtime Library for the Sparse Synchronous Model</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__closure.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Closures</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Discussion</h2>
<p>The SSM runtime supports closures, a runtime representation for functions. These encapsulate a function pointer (specifically, an enter function pointer) and a vector of partially-applied arguments (referred to as <em>argv</em>).</p>
<p>When closures are applied to arguments, they may or may not <em>reduce</em>. When a reduction takes place, a child process is created: the enter function pointer is applied to <em>argv</em>, and the resulting activation record is scheduled via <a class="el" href="group__act.html#gaf9d88d2b23295c4d405e9479c421efca" title="Schedule a routine to run in the current instant.">ssm_activate()</a>. If this happens, the caller must yield (i.e., set the program counter and return) so that the child process may run to completion before the caller resumes.</p>
<p>It might be possible to statically determine whether a caller needs to yield, so in the general case, the caller should yield <em>conditionally</em>, using <a class="el" href="group__act.html#ga22f3a7b6991a73f7c173f5a488de5f1e" title="Whether an activation record has any children.">ssm_has_children()</a> to determine whether any reduction took place. Optimizations may eliminate this check.</p>
<p>Closures are allocated with enough space for all eventual arguments to be stored in <em>argv</em>, which is in turn passed to the callee. Though this wastes extra space, it vastly increases opportunities to reuse the same closure (if it is uniquely owned by the caller).</p>
<p>Closures' <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> headers are vector-flavored; the <em>cap</em> field indicates how many arguments the closure is allocated with (i.e., how many can be applied to it), while the <em>count</em> field indicates how many arguments are currently applied. <em>cap</em> is used to determine the size, while <em>count</em> is used to determine how many valid values the garbage collector needs to scan when a closure is deallocated.</p>
<p>The "template" for each closure's memory layout is defined by <a class="el" href="structssm__closure1.html" title="The struct template of a heap-allocated closure object.">ssm_closure1</a>; closures with more argument capacity look like <a class="el" href="structssm__closure1.html" title="The struct template of a heap-allocated closure object.">ssm_closure1</a> with a longer <em>argv</em>.</p>
<p>The function <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a> applies a closure to an argument, with or without reduction. The SSM runtime library defines many helper interfaces to allow compilers to generate optimized code for interacting with closures. For example, <a class="el" href="group__closure.html#ga3a8b76546d87060af917b4e6d1b2d272" title="Add an argument to a closure.">ssm_closure_push()</a> and <a class="el" href="group__closure.html#ga2c557ccba40dc1ee7124ab385484ee1d" title="Remove an argument from a closure.">ssm_closure_pop()</a> directly add and remove arguments to <em>argv</em> without any runtime checks or function call overhead. <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a> is implemented in terms of these helpers, and should be inlined by an optimizing code generator where appropriate.</p>
<p>Meanwhile, <a class="el" href="group__closure.html#ga8187d02ef5541bc83fe16528b3114c29" title="Apply an argument to a closure that is used for the last time.">ssm_closure_apply_final()</a> optimizes the last time a closure value is used. It assumes that the caller is releasing the last remaining reference to a closure, so that the closure may be safely modified in-place.</p>
<p>When process <code>a</code> applies function <code>f</code> to argument <code>x</code>, and saves the result to <code>r</code>, the most general case (omitting reference-counting) looks like:</p>
<div class="fragment"><div class="line"><a class="code" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588">ssm_closure_apply</a>(f, x, a, a-&gt;priority, a-&gt;depth, &amp;r);</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__act.html#ga22f3a7b6991a73f7c173f5a488de5f1e">ssm_has_children</a>(a)) {</div>
<div class="line">  a-&gt;pc = N;</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line"><span class="keywordflow">case</span> N:;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__act_html_ga22f3a7b6991a73f7c173f5a488de5f1e"><div class="ttname"><a href="group__act.html#ga22f3a7b6991a73f7c173f5a488de5f1e">ssm_has_children</a></div><div class="ttdeci">#define ssm_has_children(act)</div><div class="ttdoc">Whether an activation record has any children.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00148">ssm.h:148</a></div></div>
<div class="ttc" id="agroup__closure_html_ga2cecadddeda0060a2eecd394b41c0588"><div class="ttname"><a href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588">ssm_closure_apply</a></div><div class="ttdeci">void ssm_closure_apply(ssm_value_t closure, ssm_value_t arg, ssm_act_t *parent, ssm_priority_t prio, ssm_depth_t depth, ssm_value_t *ret)</div><div class="ttdoc">Apply an argument to a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm-closure_8c_source.html#l00025">ssm-closure.c:25</a></div></div>
</div><!-- fragment --><p>where <code>N</code> is the running program counter.</p>
<p>For convenience, <em>_auto</em> variants of <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a> and <a class="el" href="group__closure.html#ga8187d02ef5541bc83fe16528b3114c29" title="Apply an argument to a closure that is used for the last time.">ssm_closure_apply_final()</a> call <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> on the argument. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structssm__closure1.html">ssm_closure1</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The struct template of a heap-allocated closure object.  <a href="structssm__closure1.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga3a5e3e969e73bd926752b98d9f3c9399"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">ssm_closure_arg_count</a>(v)&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;mm.info.vector.count)</td></tr>
<tr class="memdesc:ga3a5e3e969e73bd926752b98d9f3c9399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the number of argument values owned by a closure.  <a href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">More...</a><br /></td></tr>
<tr class="separator:ga3a5e3e969e73bd926752b98d9f3c9399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga819bdfd11f5a5379888c55bd043f5fdf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">ssm_closure_arg_cap</a>(v)&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;mm.info.vector.cap)</td></tr>
<tr class="memdesc:ga819bdfd11f5a5379888c55bd043f5fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the number of argument values accommodated by a closure.  <a href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">More...</a><br /></td></tr>
<tr class="separator:ga819bdfd11f5a5379888c55bd043f5fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe77d5af1eea62e462f6ee9494fd1e20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#gafe77d5af1eea62e462f6ee9494fd1e20">ssm_closure_func</a>(v)&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;f)</td></tr>
<tr class="memdesc:gafe77d5af1eea62e462f6ee9494fd1e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the enter function pointer of a closure.  <a href="group__closure.html#gafe77d5af1eea62e462f6ee9494fd1e20">More...</a><br /></td></tr>
<tr class="separator:gafe77d5af1eea62e462f6ee9494fd1e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e37db240b2d11c9d52644ee2ffd12fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">ssm_closure_argv</a>(v)&#160;&#160;&#160;  (&amp;*<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;argv)</td></tr>
<tr class="memdesc:ga8e37db240b2d11c9d52644ee2ffd12fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the argument array of a closure.  <a href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">More...</a><br /></td></tr>
<tr class="separator:ga8e37db240b2d11c9d52644ee2ffd12fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6673e1b1f13e4a8afcba06f1272c4bae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga6673e1b1f13e4a8afcba06f1272c4bae">ssm_closure_arg</a>(v,  i)&#160;&#160;&#160;<a class="el" href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">ssm_closure_argv</a>(v)[i]</td></tr>
<tr class="memdesc:ga6673e1b1f13e4a8afcba06f1272c4bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain the ith argument of a closure.  <a href="group__closure.html#ga6673e1b1f13e4a8afcba06f1272c4bae">More...</a><br /></td></tr>
<tr class="separator:ga6673e1b1f13e4a8afcba06f1272c4bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a778fdfd18a57c92f9140c7d7acf1bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">ssm_closure_size</a>(val_count)&#160;&#160;&#160;  (sizeof(struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>) + (sizeof(<a class="el" href="unionssm__value__t.html">ssm_value_t</a>) * ((val_count)-1)))</td></tr>
<tr class="memdesc:ga5a778fdfd18a57c92f9140c7d7acf1bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the size of a closure object.  <a href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">More...</a><br /></td></tr>
<tr class="separator:ga5a778fdfd18a57c92f9140c7d7acf1bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ac227004bd7db3d7fb47373d3c09fb1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga3ac227004bd7db3d7fb47373d3c09fb1">ssm_closure_heap_size</a>(v)&#160;&#160;&#160;<a class="el" href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">ssm_closure_size</a>(<a class="el" href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">ssm_closure_arg_cap</a>(v))</td></tr>
<tr class="memdesc:ga3ac227004bd7db3d7fb47373d3c09fb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the size of a closure already allocated on the heap.  <a href="group__closure.html#ga3ac227004bd7db3d7fb47373d3c09fb1">More...</a><br /></td></tr>
<tr class="separator:ga3ac227004bd7db3d7fb47373d3c09fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a8b76546d87060af917b4e6d1b2d272"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga3a8b76546d87060af917b4e6d1b2d272">ssm_closure_push</a>(closure,  arg)</td></tr>
<tr class="memdesc:ga3a8b76546d87060af917b4e6d1b2d272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an argument to a closure.  <a href="group__closure.html#ga3a8b76546d87060af917b4e6d1b2d272">More...</a><br /></td></tr>
<tr class="separator:ga3a8b76546d87060af917b4e6d1b2d272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c557ccba40dc1ee7124ab385484ee1d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga2c557ccba40dc1ee7124ab385484ee1d">ssm_closure_pop</a>(closure)</td></tr>
<tr class="memdesc:ga2c557ccba40dc1ee7124ab385484ee1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an argument from a closure.  <a href="group__closure.html#ga2c557ccba40dc1ee7124ab385484ee1d">More...</a><br /></td></tr>
<tr class="separator:ga2c557ccba40dc1ee7124ab385484ee1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bddd427ac9052a9ba74e2bccc46bae4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga0bddd427ac9052a9ba74e2bccc46bae4">ssm_closure_activate</a>(closure,  parent,  prio,  depth,  ret)</td></tr>
<tr class="memdesc:ga0bddd427ac9052a9ba74e2bccc46bae4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spawn and schedule a new child process from a fully-applied closure.  <a href="group__closure.html#ga0bddd427ac9052a9ba74e2bccc46bae4">More...</a><br /></td></tr>
<tr class="separator:ga0bddd427ac9052a9ba74e2bccc46bae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac4dc7cfc89aa6b972109aae42aa5938"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#gaac4dc7cfc89aa6b972109aae42aa5938">ssm_new_closure</a>(f,  args)</td></tr>
<tr class="separator:gaac4dc7cfc89aa6b972109aae42aa5938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga070172394583c84f7ff1a93472c6e445"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga070172394583c84f7ff1a93472c6e445">ssm_closure_apply_auto</a>(closure,  arg,  parent,  prio,  depth,  ret)</td></tr>
<tr class="memdesc:ga070172394583c84f7ff1a93472c6e445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closure application with automatic memory management.  <a href="group__closure.html#ga070172394583c84f7ff1a93472c6e445">More...</a><br /></td></tr>
<tr class="separator:ga070172394583c84f7ff1a93472c6e445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf62e6248814cf417c3ccd5c9b3053da6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#gaf62e6248814cf417c3ccd5c9b3053da6">ssm_closure_apply_final_auto</a>(closure,  arg,  parent,  prio,  depth,  ret)</td></tr>
<tr class="memdesc:gaf62e6248814cf417c3ccd5c9b3053da6"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-place closure application with automatic memory management.  <a href="group__closure.html#gaf62e6248814cf417c3ccd5c9b3053da6">More...</a><br /></td></tr>
<tr class="separator:gaf62e6248814cf417c3ccd5c9b3053da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba4b57a3eb4997a63db2d978a07deb1f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#gaba4b57a3eb4997a63db2d978a07deb1f">ssm_closure_free</a>(closure)</td></tr>
<tr class="memdesc:gaba4b57a3eb4997a63db2d978a07deb1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper to free a closure (without reference counting).  <a href="group__closure.html#gaba4b57a3eb4997a63db2d978a07deb1f">More...</a><br /></td></tr>
<tr class="separator:gaba4b57a3eb4997a63db2d978a07deb1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaa9ab36bd353c371e02a2fbd3e007e0c6"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#gaa9ab36bd353c371e02a2fbd3e007e0c6">ssm_func_t</a>) (<a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *parent, <a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a> prio, <a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a> depth, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *argv, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *ret)</td></tr>
<tr class="memdesc:gaa9ab36bd353c371e02a2fbd3e007e0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type signature for all SSM enter functions.  <a href="group__closure.html#gaa9ab36bd353c371e02a2fbd3e007e0c6">More...</a><br /></td></tr>
<tr class="separator:gaa9ab36bd353c371e02a2fbd3e007e0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3a4934f1e4b97097eb42a900be593adc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga3a4934f1e4b97097eb42a900be593adc">ssm_new_closure_int</a> (<a class="el" href="group__closure.html#gaa9ab36bd353c371e02a2fbd3e007e0c6">ssm_func_t</a> f, uint8_t arg_cap)</td></tr>
<tr class="memdesc:ga3a4934f1e4b97097eb42a900be593adc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a closure on the heap.  <a href="group__closure.html#ga3a4934f1e4b97097eb42a900be593adc">More...</a><br /></td></tr>
<tr class="separator:ga3a4934f1e4b97097eb42a900be593adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67e6195803299954772a7f437d637e53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga67e6195803299954772a7f437d637e53">ssm_closure_clone</a> (<a class="el" href="unionssm__value__t.html">ssm_value_t</a> closure)</td></tr>
<tr class="memdesc:ga67e6195803299954772a7f437d637e53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a copy of a closure.  <a href="group__closure.html#ga67e6195803299954772a7f437d637e53">More...</a><br /></td></tr>
<tr class="separator:ga67e6195803299954772a7f437d637e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cecadddeda0060a2eecd394b41c0588"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588">ssm_closure_apply</a> (<a class="el" href="unionssm__value__t.html">ssm_value_t</a> closure, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> arg, <a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *parent, <a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a> prio, <a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a> depth, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *ret)</td></tr>
<tr class="memdesc:ga2cecadddeda0060a2eecd394b41c0588"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply an argument to a closure.  <a href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588">More...</a><br /></td></tr>
<tr class="separator:ga2cecadddeda0060a2eecd394b41c0588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8187d02ef5541bc83fe16528b3114c29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__closure.html#ga8187d02ef5541bc83fe16528b3114c29">ssm_closure_apply_final</a> (<a class="el" href="unionssm__value__t.html">ssm_value_t</a> closure, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> arg, <a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *parent, <a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a> prio, <a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a> depth, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *ret)</td></tr>
<tr class="memdesc:ga8187d02ef5541bc83fe16528b3114c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply an argument to a closure that is used for the last time.  <a href="group__closure.html#ga8187d02ef5541bc83fe16528b3114c29">More...</a><br /></td></tr>
<tr class="separator:ga8187d02ef5541bc83fe16528b3114c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga3a5e3e969e73bd926752b98d9f3c9399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a5e3e969e73bd926752b98d9f3c9399">&#9670;&nbsp;</a></span>ssm_closure_arg_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_arg_count</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;mm.info.vector.count)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the number of argument values owned by a closure. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00811">811</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga819bdfd11f5a5379888c55bd043f5fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga819bdfd11f5a5379888c55bd043f5fdf">&#9670;&nbsp;</a></span>ssm_closure_arg_cap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_arg_cap</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;mm.info.vector.cap)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the number of argument values accommodated by a closure. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00815">815</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gafe77d5af1eea62e462f6ee9494fd1e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe77d5af1eea62e462f6ee9494fd1e20">&#9670;&nbsp;</a></span>ssm_closure_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_func</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  (<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;f)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the enter function pointer of a closure. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00819">819</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga8e37db240b2d11c9d52644ee2ffd12fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e37db240b2d11c9d52644ee2ffd12fc">&#9670;&nbsp;</a></span>ssm_closure_argv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_argv</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  (&amp;*<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>, mm)-&gt;argv)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the argument array of a closure. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00823">823</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga6673e1b1f13e4a8afcba06f1272c4bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6673e1b1f13e4a8afcba06f1272c4bae">&#9670;&nbsp;</a></span>ssm_closure_arg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_arg</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">ssm_closure_argv</a>(v)[i]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain the ith argument of a closure. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00827">827</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga5a778fdfd18a57c92f9140c7d7acf1bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a778fdfd18a57c92f9140c7d7acf1bd">&#9670;&nbsp;</a></span>ssm_closure_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val_count</td><td>)</td>
          <td>&#160;&#160;&#160;  (sizeof(struct <a class="el" href="structssm__closure1.html">ssm_closure1</a>) + (sizeof(<a class="el" href="unionssm__value__t.html">ssm_value_t</a>) * ((val_count)-1)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the size of a closure object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val_count</td><td>the <em>val_count</em> field of the closure's <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> header. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the closure object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00834">834</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga3ac227004bd7db3d7fb47373d3c09fb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ac227004bd7db3d7fb47373d3c09fb1">&#9670;&nbsp;</a></span>ssm_closure_heap_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_heap_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">ssm_closure_size</a>(<a class="el" href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">ssm_closure_arg_cap</a>(v))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the size of a closure already allocated on the heap. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00838">838</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga3a8b76546d87060af917b4e6d1b2d272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a8b76546d87060af917b4e6d1b2d272">&#9670;&nbsp;</a></span>ssm_closure_push</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_push</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code" href="group__closure.html#ga6673e1b1f13e4a8afcba06f1272c4bae">do                                                                           \</a></div>
<div class="line"><a class="code" href="group__closure.html#ga6673e1b1f13e4a8afcba06f1272c4bae">    ssm_closure_arg</a>(closure, <a class="code" href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">ssm_closure_arg_count</a>(closure)++) = (arg);        \</div>
<div class="line">  while (0)</div>
<div class="ttc" id="agroup__closure_html_ga3a5e3e969e73bd926752b98d9f3c9399"><div class="ttname"><a href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">ssm_closure_arg_count</a></div><div class="ttdeci">#define ssm_closure_arg_count(v)</div><div class="ttdoc">Obtain the number of argument values owned by a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00811">ssm.h:811</a></div></div>
<div class="ttc" id="agroup__closure_html_ga6673e1b1f13e4a8afcba06f1272c4bae"><div class="ttname"><a href="group__closure.html#ga6673e1b1f13e4a8afcba06f1272c4bae">ssm_closure_arg</a></div><div class="ttdeci">#define ssm_closure_arg(v, i)</div><div class="ttdoc">Obtain the ith argument of a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00827">ssm.h:827</a></div></div>
</div><!-- fragment -->
<p>Add an argument to a closure. </p>
<p>Note that this helper increments the <em>arg_count</em> of <em>closure</em> but does not perform memory management, i.e., does not <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> <em>arg</em>. It also does not check whether <em>closure</em> has capacity for <em>arg</em>. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00846">846</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga2c557ccba40dc1ee7124ab385484ee1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c557ccba40dc1ee7124ab385484ee1d">&#9670;&nbsp;</a></span>ssm_closure_pop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_pop</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code" href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">do                                                                           \</a></div>
<div class="line"><a class="code" href="group__closure.html#ga3a5e3e969e73bd926752b98d9f3c9399">    ssm_closure_arg_count</a>(closure)--;                                          \</div>
<div class="line">  while (0)</div>
</div><!-- fragment -->
<p>Remove an argument from a closure. </p>
<p>Note that this helper decrements the <em>arg_count</em> of <em>closure</em> but does not perform memory management, i.e., does not <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> <em>arg</em>. It also does not check whether <em>closure</em> has a non-zero number of arguments already applied. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00858">858</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga0bddd427ac9052a9ba74e2bccc46bae4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0bddd427ac9052a9ba74e2bccc46bae4">&#9670;&nbsp;</a></span>ssm_closure_activate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_activate</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">parent, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">prio, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">depth, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code" href="group__act.html#gaf9d88d2b23295c4d405e9479c421efca">ssm_activate</a>(<a class="code" href="group__closure.html#gafe77d5af1eea62e462f6ee9494fd1e20">ssm_closure_func</a>(closure)(parent, prio, depth,                  \</div>
<div class="line">                                         <a class="code" href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">ssm_closure_argv</a>(closure), ret))</div>
<div class="ttc" id="agroup__act_html_gaf9d88d2b23295c4d405e9479c421efca"><div class="ttname"><a href="group__act.html#gaf9d88d2b23295c4d405e9479c421efca">ssm_activate</a></div><div class="ttdeci">void ssm_activate(ssm_act_t *act)</div><div class="ttdoc">Schedule a routine to run in the current instant.</div><div class="ttdef"><b>Definition:</b> <a href="ssm-scheduler_8c_source.html#l00298">ssm-scheduler.c:298</a></div></div>
<div class="ttc" id="agroup__closure_html_ga8e37db240b2d11c9d52644ee2ffd12fc"><div class="ttname"><a href="group__closure.html#ga8e37db240b2d11c9d52644ee2ffd12fc">ssm_closure_argv</a></div><div class="ttdeci">#define ssm_closure_argv(v)</div><div class="ttdoc">Retrieve the argument array of a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00823">ssm.h:823</a></div></div>
<div class="ttc" id="agroup__closure_html_gafe77d5af1eea62e462f6ee9494fd1e20"><div class="ttname"><a href="group__closure.html#gafe77d5af1eea62e462f6ee9494fd1e20">ssm_closure_func</a></div><div class="ttdeci">#define ssm_closure_func(v)</div><div class="ttdoc">Obtain the enter function pointer of a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00819">ssm.h:819</a></div></div>
</div><!-- fragment -->
<p>Spawn and schedule a new child process from a fully-applied closure. </p>
<p>Note that this helper does not perform any memory management, nor does it ensure that <em>closure</em> has all arguments applied. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00868">868</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gaac4dc7cfc89aa6b972109aae42aa5938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac4dc7cfc89aa6b972109aae42aa5938">&#9670;&nbsp;</a></span>ssm_new_closure</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_new_closure</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">f, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  (fprintf(stderr, <span class="stringliteral">&quot;%s:%d:ssm_new_closure(_, %d)\n&quot;</span>, __FILE__, __LINE__,       \</div>
<div class="line">           (args)),                                                            \</div>
<div class="line">   ssm_new_closure_int((f), (args)))</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00880">880</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga070172394583c84f7ff1a93472c6e445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga070172394583c84f7ff1a93472c6e445">&#9670;&nbsp;</a></span>ssm_closure_apply_auto</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_apply_auto</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">parent, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">prio, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">depth, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                                                                         \</div>
<div class="line">    ssm_dup(arg);                                                              \</div>
<div class="line">    ssm_closure_apply(closure, arg, parent, prio, depth, ret);                 \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>Closure application with automatic memory management. </p>
<p><a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> is called on <em>a</em> before <em>f</em> is applied to it; see <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closure</td><td>the closure to be applied. </td></tr>
    <tr><td class="paramname">arg</td><td>the argument <em>closure</em> is applied to. </td></tr>
    <tr><td class="paramname">parent</td><td>the current process performing the application. </td></tr>
    <tr><td class="paramname">prio</td><td>priority of the current process. </td></tr>
    <tr><td class="paramname">depth</td><td>depth of the current process. </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to the return value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00971">971</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gaf62e6248814cf417c3ccd5c9b3053da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf62e6248814cf417c3ccd5c9b3053da6">&#9670;&nbsp;</a></span>ssm_closure_apply_final_auto</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_apply_final_auto</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">parent, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">prio, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">depth, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> {                                                                         \</div>
<div class="line">    ssm_dup(arg);                                                              \</div>
<div class="line">    ssm_closure_apply_final(closure, arg, parent, prio, depth, ret);           \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>In-place closure application with automatic memory management. </p>
<p><a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> is called on <em>a</em> before <em>f</em> is applied to it; see <a class="el" href="group__closure.html#ga8187d02ef5541bc83fe16528b3114c29" title="Apply an argument to a closure that is used for the last time.">ssm_closure_apply_final()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closure</td><td>the closure to be applied. </td></tr>
    <tr><td class="paramname">arg</td><td>the argument <em>closure</em> is applied to. </td></tr>
    <tr><td class="paramname">parent</td><td>the current process performing the application. </td></tr>
    <tr><td class="paramname">prio</td><td>priority of the current process. </td></tr>
    <tr><td class="paramname">depth</td><td>depth of the current process. </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to the return value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00989">989</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gaba4b57a3eb4997a63db2d978a07deb1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba4b57a3eb4997a63db2d978a07deb1f">&#9670;&nbsp;</a></span>ssm_closure_free</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_closure_free</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">closure</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <a class="code" href="group__mem.html#ga3087c5edfa451e28309ea0cb234ad02e">ssm_mem_free</a>((closure).heap_ptr,                                             \</div>
<div class="line">               <a class="code" href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">ssm_closure_size</a>(<a class="code" href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">ssm_closure_arg_cap</a>(closure)))</div>
<div class="ttc" id="agroup__closure_html_ga5a778fdfd18a57c92f9140c7d7acf1bd"><div class="ttname"><a href="group__closure.html#ga5a778fdfd18a57c92f9140c7d7acf1bd">ssm_closure_size</a></div><div class="ttdeci">#define ssm_closure_size(val_count)</div><div class="ttdoc">Compute the size of a closure object.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00834">ssm.h:834</a></div></div>
<div class="ttc" id="agroup__closure_html_ga819bdfd11f5a5379888c55bd043f5fdf"><div class="ttname"><a href="group__closure.html#ga819bdfd11f5a5379888c55bd043f5fdf">ssm_closure_arg_cap</a></div><div class="ttdeci">#define ssm_closure_arg_cap(v)</div><div class="ttdoc">Obtain the number of argument values accommodated by a closure.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00815">ssm.h:815</a></div></div>
<div class="ttc" id="agroup__mem_html_ga3087c5edfa451e28309ea0cb234ad02e"><div class="ttname"><a href="group__mem.html#ga3087c5edfa451e28309ea0cb234ad02e">ssm_mem_free</a></div><div class="ttdeci">void ssm_mem_free(void *m, size_t size)</div><div class="ttdoc">Deallocate memory allocated by ssm_mem_alloc().</div><div class="ttdef"><b>Definition:</b> <a href="ssm-mem_8c_source.html#l00233">ssm-mem.c:233</a></div></div>
</div><!-- fragment -->
<p>Helper to free a closure (without reference counting). </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00996">996</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaa9ab36bd353c371e02a2fbd3e007e0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9ab36bd353c371e02a2fbd3e007e0c6">&#9670;&nbsp;</a></span>ssm_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a>*(* ssm_func_t) (<a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *parent, <a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a> prio, <a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a> depth, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *argv, <a class="el" href="unionssm__value__t.html">ssm_value_t</a> *ret)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type signature for all SSM enter functions. </p>
<p>This type standardizes the "calling convention" of SSM functions, so that they can be stored in generic closures and treated uniformly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>the activation record of the caller. </td></tr>
    <tr><td class="paramname">prio</td><td>the priority of the callee. </td></tr>
    <tr><td class="paramname">depth</td><td>the depth of the callee. </td></tr>
    <tr><td class="paramname">argv</td><td>an array of <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> arguments given to the callee. </td></tr>
    <tr><td class="paramname">ret</td><td>the return value address that the callee should write to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an allocated activation record for the callee. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l00783">783</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3a4934f1e4b97097eb42a900be593adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a4934f1e4b97097eb42a900be593adc">&#9670;&nbsp;</a></span>ssm_new_closure_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> ssm_new_closure_int </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__closure.html#gaa9ab36bd353c371e02a2fbd3e007e0c6">ssm_func_t</a>&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>arg_cap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a closure on the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>the enter function pointer of the closure. </td></tr>
    <tr><td class="paramname">arg_cap</td><td>the number of arguments the closure should accommodate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value pointing to the heap-allocated closure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00294">294</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
<a id="ga67e6195803299954772a7f437d637e53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67e6195803299954772a7f437d637e53">&#9670;&nbsp;</a></span>ssm_closure_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> ssm_closure_clone </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>closure</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a copy of a closure. </p>
<dl class="section note"><dt>Note</dt><dd>Calls <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> on all previously applied arguments.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closure</td><td>the closure to be copied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a value pointing to the heap-allocated closure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-closure_8c_source.html#l00012">12</a> of file <a class="el" href="ssm-closure_8c_source.html">ssm-closure.c</a>.</p>

</div>
</div>
<a id="ga2cecadddeda0060a2eecd394b41c0588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cecadddeda0060a2eecd394b41c0588">&#9670;&nbsp;</a></span>ssm_closure_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_closure_apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>closure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a>&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a>&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> *&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply an argument to a closure. </p>
<p>The behavior depends on whether <em>closure</em> needs to be activated after being applied to <em>arg</em>, i.e., whether all of its arguments have arrived.</p>
<p>If <em>closure</em> is activated, a child process will be scheduled, so the caller must yield to the scheduler to allow the child process to run. The child process will write its return value to <em>ret</em>.</p>
<p>If <em>closure</em> is not activated, a copy of it (via <a class="el" href="group__closure.html#ga67e6195803299954772a7f437d637e53" title="Create a copy of a closure.">ssm_closure_clone()</a>) with <em>arg</em> pushed to its <em>argv</em> will be written to <em>ret</em>.</p>
<p>In both cases, all values in <em>closure's</em> <em>argv</em> will have <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> called on them, since application will result in those values being shared in a new context, either from a child process or from the cloned closure. Note that <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> is <em>not</em> called on <em>arg</em>; to do so automatically, use <a class="el" href="group__closure.html#ga070172394583c84f7ff1a93472c6e445" title="Closure application with automatic memory management.">ssm_closure_apply_auto()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closure</td><td>the closure to be applied. </td></tr>
    <tr><td class="paramname">arg</td><td>the argument <em>closure</em> is applied to. </td></tr>
    <tr><td class="paramname">parent</td><td>the current process performing the application. </td></tr>
    <tr><td class="paramname">prio</td><td>priority of the current process. </td></tr>
    <tr><td class="paramname">depth</td><td>depth of the current process. </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to the return value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-closure_8c_source.html#l00025">25</a> of file <a class="el" href="ssm-closure_8c_source.html">ssm-closure.c</a>.</p>

</div>
</div>
<a id="ga8187d02ef5541bc83fe16528b3114c29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8187d02ef5541bc83fe16528b3114c29">&#9670;&nbsp;</a></span>ssm_closure_apply_final()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ssm_closure_apply_final </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>closure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#gab35cf37819a1a1538704654128b1db4f">ssm_act_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#gaf0599e969847088348147d8fb9a7bd82">ssm_priority_t</a>&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__act.html#ga22bed0d9ef54aa307caef28a6b3fe010">ssm_depth_t</a>&#160;</td>
          <td class="paramname"><em>depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> *&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply an argument to a closure that is used for the last time. </p>
<p>An optimized version of <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a>, to be used only provided:</p>
<ol type="1">
<li>this is the last time <em>closure</em> is used by the caller.</li>
<li>no other processes share <em>closure</em>.</li>
</ol>
<p>This implementation should be used as the fast path when those conditions hold; it improves upon the more general <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a> by using <em>closure</em> in-place, and avoiding unnecessary <a class="el" href="group__mem.html#ga9f7765026c74350e37df334c9e59bb12" title="Duplicate a possible heap reference, incrementing its ref count.">ssm_dup()</a> and <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> called. After this is called, <em>closure</em> will not need to be dropped.</p>
<p>The behavior of this function is equivalent to:</p>
<div class="fragment"><div class="line"><a class="code" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588">ssm_closure_apply</a>(f, a, p, prio, depth, ret);</div>
<div class="line"><a class="code" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054">ssm_drop</a>(f);</div>
<div class="ttc" id="agroup__mem_html_gabaf350ad4a1577dee5e31e6efd851054"><div class="ttname"><a href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054">ssm_drop</a></div><div class="ttdeci">#define ssm_drop(v)</div><div class="ttdoc">Drop a reference to a possible heap item, and free it if necessary.</div><div class="ttdef"><b>Definition:</b> <a href="ssm_8h_source.html#l00338">ssm.h:338</a></div></div>
</div><!-- fragment --><p>Like <a class="el" href="group__closure.html#ga2cecadddeda0060a2eecd394b41c0588" title="Apply an argument to a closure.">ssm_closure_apply()</a>, this function does not <a class="el" href="group__mem.html#gabaf350ad4a1577dee5e31e6efd851054" title="Drop a reference to a possible heap item, and free it if necessary.">ssm_drop()</a> <em>arg</em>; to do so automatically, use <a class="el" href="group__closure.html#gaf62e6248814cf417c3ccd5c9b3053da6" title="In-place closure application with automatic memory management.">ssm_closure_apply_final_auto()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closure</td><td>the closure to be applied. </td></tr>
    <tr><td class="paramname">arg</td><td>the argument <em>closure</em> is applied to. </td></tr>
    <tr><td class="paramname">parent</td><td>the current process performing the application. </td></tr>
    <tr><td class="paramname">prio</td><td>priority of the current process. </td></tr>
    <tr><td class="paramname">depth</td><td>depth of the current process. </td></tr>
    <tr><td class="paramname">ret</td><td>pointer to the return value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="ssm-closure_8c_source.html#l00043">43</a> of file <a class="el" href="ssm-closure_8c_source.html">ssm-closure.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
<script type="text/javascript">
    // script for doxygen 1.9.1
    $(function() {
        $(document).ready(function(){
           toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
           toggleButton.title = "Toggle Light/Dark Mode"
           document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
       })
    })
</script>
</body>
</html>
