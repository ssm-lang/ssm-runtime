<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ssm: Blobs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ssm
   &#160;<span id="projectnumber">0.0.2</span>
   </div>
   <div id="projectbrief">Runtime Library for the Sparse Synchronous Model</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__blob.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Blobs</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Discussion</h2>
<p>The SSM allocator allows programs to allocate contiguous chunks of reference-counted memory whose contents are of arbitrary layout. This object type provides users the flexibility to extend runtime with objects that the runtime does not natively support, so long as they commit to managing stored resources themselves, because the garbage collector will not scan the payload for other managed heap pointers.</p>
<p>Blobs use size-flavored <a class="el" href="structssm__mm.html" title="The memory management metadata &quot;header&quot; for heap-allocated objects.">ssm_mm</a> headers, where the <em>size</em> field determines the size of blob payload. To support even larger blob sizes, the actual size is divided by <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d" title="The size resolution for heap-allocated blobs.">SSM_BLOB_SIZE_SCALE</a> while stored in <em>size</em>.</p>
<p>The heap memory layout for blobs are described by <a class="el" href="structssm__blob1.html" title="The struct template of a heap-allocated blob.">ssm_blob1</a>. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structssm__blob1.html">ssm_blob1</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The struct template of a heap-allocated blob.  <a href="structssm__blob1.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga7845e221ce58af6590807c86c911d03d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">SSM_BLOB_SIZE_SCALE</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga7845e221ce58af6590807c86c911d03d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <em>size</em> resolution for heap-allocated blobs.  <a href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">More...</a><br /></td></tr>
<tr class="separator:ga7845e221ce58af6590807c86c911d03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c9c1ed79de3a572277f4c3c2d0b30c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#ga1c9c1ed79de3a572277f4c3c2d0b30c9">ssm_blob_size</a>(size)&#160;&#160;&#160;  (sizeof(struct <a class="el" href="structssm__blob1.html">ssm_blob1</a>) - <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">SSM_BLOB_SIZE_SCALE</a> + (size))</td></tr>
<tr class="memdesc:ga1c9c1ed79de3a572277f4c3c2d0b30c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the size of a blob with its header.  <a href="group__blob.html#ga1c9c1ed79de3a572277f4c3c2d0b30c9">More...</a><br /></td></tr>
<tr class="separator:ga1c9c1ed79de3a572277f4c3c2d0b30c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56fe22cc0fb8d17f66550d4cb974c407"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#ga56fe22cc0fb8d17f66550d4cb974c407">ssm_blob_heap_size</a>(v)&#160;&#160;&#160;  <a class="el" href="group__blob.html#ga1c9c1ed79de3a572277f4c3c2d0b30c9">ssm_blob_size</a>(((v).heap_ptr-&gt;info.size) * <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">SSM_BLOB_SIZE_SCALE</a>)</td></tr>
<tr class="memdesc:ga56fe22cc0fb8d17f66550d4cb974c407"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the size a blob in the heap.  <a href="group__blob.html#ga56fe22cc0fb8d17f66550d4cb974c407">More...</a><br /></td></tr>
<tr class="separator:ga56fe22cc0fb8d17f66550d4cb974c407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8da5b4ec57c2a80db1be1606497bbbc9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#ga8da5b4ec57c2a80db1be1606497bbbc9">ssm_blob_payload</a>(v)&#160;&#160;&#160;  (&amp;*(<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__blob1.html">ssm_blob1</a>, mm)-&gt;payload))</td></tr>
<tr class="memdesc:ga8da5b4ec57c2a80db1be1606497bbbc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain pointer to the payload of a blob from an <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>.  <a href="group__blob.html#ga8da5b4ec57c2a80db1be1606497bbbc9">More...</a><br /></td></tr>
<tr class="separator:ga8da5b4ec57c2a80db1be1606497bbbc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcb4958e51bd3f6088ea4b98fa6317dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#gabcb4958e51bd3f6088ea4b98fa6317dc">ssm_new_blob</a>(s)</td></tr>
<tr class="separator:gabcb4958e51bd3f6088ea4b98fa6317dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0d90c8b3b513110551b6646e25313d84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="unionssm__value__t.html">ssm_value_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blob.html#ga0d90c8b3b513110551b6646e25313d84">ssm_new_blob_int</a> (uint16_t size)</td></tr>
<tr class="memdesc:ga0d90c8b3b513110551b6646e25313d84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a blob on the heap.  <a href="group__blob.html#ga0d90c8b3b513110551b6646e25313d84">More...</a><br /></td></tr>
<tr class="separator:ga0d90c8b3b513110551b6646e25313d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga7845e221ce58af6590807c86c911d03d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7845e221ce58af6590807c86c911d03d">&#9670;&nbsp;</a></span>SSM_BLOB_SIZE_SCALE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SSM_BLOB_SIZE_SCALE&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The <em>size</em> resolution for heap-allocated blobs. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l01067">1067</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga1c9c1ed79de3a572277f4c3c2d0b30c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c9c1ed79de3a572277f4c3c2d0b30c9">&#9670;&nbsp;</a></span>ssm_blob_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_blob_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size</td><td>)</td>
          <td>&#160;&#160;&#160;  (sizeof(struct <a class="el" href="structssm__blob1.html">ssm_blob1</a>) - <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">SSM_BLOB_SIZE_SCALE</a> + (size))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the size of a blob with its header. </p>
<p>The <em>size</em> parameter should already be scaled, i.e., already multiplied by <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d" title="The size resolution for heap-allocated blobs.">SSM_BLOB_SIZE_SCALE</a>, before being passed into this macro.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>scaled size of the blob's payload. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size that a blob of <em>size</em> payload occupies in the heap. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l01106">1106</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga56fe22cc0fb8d17f66550d4cb974c407"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga56fe22cc0fb8d17f66550d4cb974c407">&#9670;&nbsp;</a></span>ssm_blob_heap_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_blob_heap_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  <a class="el" href="group__blob.html#ga1c9c1ed79de3a572277f4c3c2d0b30c9">ssm_blob_size</a>(((v).heap_ptr-&gt;info.size) * <a class="el" href="group__blob.html#ga7845e221ce58af6590807c86c911d03d">SSM_BLOB_SIZE_SCALE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the size a blob in the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td><a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> pointing to some blob in the heap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of the blob that <em>v</em> points to. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l01114">1114</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="ga8da5b4ec57c2a80db1be1606497bbbc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8da5b4ec57c2a80db1be1606497bbbc9">&#9670;&nbsp;</a></span>ssm_blob_payload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_blob_payload</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;  (&amp;*(<a class="el" href="group__util.html#gaf8c317a42292b61c93aae91e59118a46">container_of</a>((v).heap_ptr, struct <a class="el" href="structssm__blob1.html">ssm_blob1</a>, mm)-&gt;payload))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain pointer to the payload of a blob from an <a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a>. </p>

<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l01118">1118</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<a id="gabcb4958e51bd3f6088ea4b98fa6317dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcb4958e51bd3f6088ea4b98fa6317dc">&#9670;&nbsp;</a></span>ssm_new_blob</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ssm_new_blob</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  (fprintf(stderr, <span class="stringliteral">&quot;%s:%d:ssm_new_blob(%lu)\n&quot;</span>, __FILE__, __LINE__, (size)),   \</div>
<div class="line">   ssm_new_blob_int(size))</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="ssm_8h_source.html#l01128">1128</a> of file <a class="el" href="ssm_8h_source.html">ssm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0d90c8b3b513110551b6646e25313d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d90c8b3b513110551b6646e25313d84">&#9670;&nbsp;</a></span>ssm_new_blob_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unionssm__value__t.html">ssm_value_t</a> ssm_new_blob_int </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a blob on the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>size of the payload to the allocated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="unionssm__value__t.html" title="SSM values are either &quot;packed&quot; values or heap-allocated.">ssm_value_t</a> pointing to heap-allocated blob. </dd></dl>

<p class="definition">Definition at line <a class="el" href="ssm-mem_8c_source.html#l00313">313</a> of file <a class="el" href="ssm-mem_8c_source.html">ssm-mem.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
<script type="text/javascript">
    // script for doxygen 1.9.1
    $(function() {
        $(document).ready(function(){
           toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
           toggleButton.title = "Toggle Light/Dark Mode"
           document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
       })
    })
</script>
</body>
</html>
